---
layout: page
permalink: /ee272b-spring2021/
title: EE272B - Design Projects in VLSI Systems II
subtitle: Design and tape out your own digital, analog or mixed-signal chip in an open-source technology! 
show_sidebar: false
menubar: ee272_menu
---
<div class="content">

    
<h2 id="overview">Overview</h2>

<p>This is a follow on course to EE272A. While in EE272A you learn the EDA tool flow and design a pre-specified digital neural network accelerator and an analog block, in EE272B you will leverage your knowledge from EE272A and design and fabricate your own digital/analog/mixed-signal chip! This is a completely project-based course where, working in teams of two, you will propose your own mixed-signal chip, write a Verilog or a synthesizable C++ model of your chip, create a testing/debug strategy for your chip, wrap custom layout to fit into a standard cell system, use synthesis and place and route tools to create the layout of your chip, perform physical verification and finally tape it out in the <a href="https://github.com/google/skywater-pdk">open-source SkyWater 130 nm technology</a>. Useful for anyone who will build a chip in their Ph.D.</p>

<p><strong>Term</strong>: 2020-2021 Spring<br /><br />
    
<strong>Units</strong>: 3-4<br /><br />
    
<strong>Instructor</strong>: Priyanka Raina (praina at stanford dot edu)<br /><br />
    
<strong>TAs</strong>: Kartik Prabhu (kprabhu7 at stanford dot edu), Daniel Stanley (dstanley at stanford dot edu)<br /><br />
    
<strong>Lectures</strong>: Mon, Wed, 1 - 2:30 PM over Zoom. <br /><br />
    
<strong>Open office hours</strong>:<br />
Priyanka: Wed, 2:30 - 3:30 PM over Zoom.<br />
Kartik: Fri, 1 - 2 PM over Zoom.<br />
Daniel: Thu, 1 - 2 PM over Zoom.<br /><br />

<strong>Project sync-ups</strong>:<br />
Priyanka: Mon, 2:30 - 3 PM (Po-Han/Charles), Mon, 3:30 - 4 PM (John)<br />
Kartik:	Mon, 2:30 - 3 PM (Kylee/Sam), Mon, 3:30 - 4 PM (Ismael/George), Tue, 2 - 2:30 PM(Eldrick/Matthew)<br />
Daniel:	Tue, 3 - 3:30 PM (Aparna/Weston), Tue, 3:45-4:15 PM (Can/Estelle), Tue, 4:30 - 5 PM (Nikhil) <br /><br />
    
<strong>Canvas</strong>: All documents, including lecture notes, and lecture video recordings will be posted on Canvas. <br /><br />
    
<strong>Slack/Piazza</strong>: For questions about lectures and project debugging we will use Slack and Piazza. Everyone should also join the <a href="https://invite.skywater.tools/">skywater-pdk Slack channel</a> for collaborating and debugging with the larger open hardware community.
</p>    

<h2 id="pre-requisites">Pre-requisites</h2>
<p><a href="/ee271-autumn2019/">EE271</a>, <a href="/ee272a-winter2021/">EE272A</a> and fundamentals of digital/analog circuit design.</p>
    
    
<h2 id="projects">Technology and Design Flows</h2>
    
<div class="columns is-mobile is-centered is-vcentered">
  <div class="column">    
      
    <ul>
      <li><strong>Technology</strong>: <a href="https://github.com/google/skywater-pdk">SkyWater 130 nm open-source PDK</a>.</li>
      <li><strong>Shuttle</strong>: <a href="https://efabless.com/chipignite/2106Q">Efabless chipIgnite MPW shuttle</a>, which provides:
          <ul>
              <li>10 square mm area for the user design per project.</li>
              <li>A standardized harness called <a href="https://github.com/efabless/caravel">caravel</a> with a RISC-V CPU, RAM, and 38 general purpose I/Os.</li>
              <li>100 packaged ICs and 5 assembled boards post fabrication.</li>
          </ul>
      </li>
    </ul>

    <ul>
      <li><strong>Analog design flow</strong>: We use an open-source analog design flow with the following tools (note that commercial analog design tools like Virtuoso and Calibre are not supported for this open PDK yet): 
          <ul>
              <li>PDK files from <a href="https://github.com/google/skywater-pdk">skywater-pdk</a>, <a href="https://github.com/RTimothyEdwards/open_pdks">open_pdks</a> and <a href="https://github.com/StefanSchippers/xschem_sky130">xschem_sky130</a>. All of these are necessary.</li>
              <li>Schematic entry with <a href="https://github.com/StefanSchippers/xschem">xschem</a>.</li>
              <li>Simulation with <a href="https://sourceforge.net/p/ngspice/ngspice/ci/master/tree/">ngspice</a>.</li>
              <li>Layout, extraction and DRC with <a href="https://github.com/RTimothyEdwards/magic">magic</a>.</li>
              <li>LVS with <a href="https://github.com/RTimothyEdwards/netgen">netgen</a>.</li>
              <li>Manual routing of design using magic into the <a href="https://github.com/efabless/caravel_user_project_analog">caravel analog user project</a>. This user project is submitted to the shuttle.</li>
          </ul>
      </li>
    </ul>
  
  </div>
  <div class="column is-one-third">
    {% include image-modal.html ratio="is-3by4" link="/assets/images/caravel.svg" alt="Voltage reference" large_link="/assets/images/caravel.svg" %}
  </div>    
</div>
    
{% include image-modal.html ratio="is-3by1" link="/assets/images/analog_flow.svg" alt="Voltage reference" large_link="/assets/images/analog_flow.svg" %}
<ul>
  <li><strong>Digital design flow</strong>: We use either an open-source digital design flow called <a href="https://github.com/efabless/openlane">OpenLane</a>, or for advanced features, a (mostly) commercial digital design flow shown below composed using <a href="https://github.com/mflowgen/mflowgen">mflowgen</a>. Note that since the open PDK does not have support for Calibre yet, we use a combination of magic and netgen for DRC, extraction and LVS for the digital designs as well. In either case, we perform the final integration of the user design into the <a href="https://github.com/efabless/caravel_user_project">caravel user project</a> using OpenLane. This user project is submitted to the shuttle.</li>
</ul>

{% include image-modal.html ratio="is-3by1" link="/assets/images/commercial_digital_flow.svg" alt="Voltage reference" large_link="/assets/images/commercial_digital_flow.svg" %}
    
<h2 id="projects">Resources</h2>

    
<ul>
    <li><h4>Installing Tools</h4>
        <ul>
            <li>This <a href="https://github.com/google/skywater-pdk">video</a> shows how to install ngspice, skywater-pdk, xschem_sky130, and xschem.</li>
        </ul>
    </li>
    <li><h4>Documentaion</h4>
        <ul>
            <li>SkyWater 130 nm PDK</li>
            <li><a href="http://repo.hu/projects/xschem/xschem_man/xschem_man.html">Xschem</a></li>
            <li>Ngspice</li>
            <li>Magic</li>
            <li>Netgen</li>
            <li>OpenLane</li>
            <li>Caravel</li>
            <li>Mflowgen</li>
        <ul>
    </li>
</ul>
    
    
<h2 id="projects">Student Projects</h2>
    

<div class="columns is-mobile is-centered is-vcentered">
  <div class="column is-one-third">
    {% include image-modal.html ratio="is-4by5" link="/assets/images/john-wrapper-small.png" alt="Voltage reference" large_link="/assets/images/john-wrapper-small.png" %}
  </div>
  <div class="column">
    <span><h3>Bandgap Voltage Reference</h3></span>
    <span><h5>John Kustin</h5></span>
    <span><h5><a href="https://github.com/johnkustin/ee272b">Code</a></h5></span>
    <span><p></p></span>
  </div>
</div> 
    
    
<div class="columns is-mobile is-centered is-vcentered">
  <div class="column is-one-third">
    {% include image-modal.html ratio="is-4by5" link="/assets/images/weston-wrapper-small.jpeg" alt="Buck converter" large_link="/assets/images/weston-wrapper-small.jpeg" %}
  </div>
  <div class="column">
    <span><h3>OpenPMIC: A Current Mode Buck Converter in Sky130</h3></span>
    <span><h5>Weston Braun, Aparna Tumkur</h5></span>
    <span><h5><a href="https://github.com/westonb/open-pmic">Code</a></h5></span>
    <span><p></p></span>
  </div>
</div> 
    
    
<div class="columns is-mobile is-centered is-vcentered">
  <div class="column is-one-third">
    {% include image-modal.html ratio="is-4by5" link="/assets/images/can-wrapper-small.png" alt="High speed link" large_link="/assets/images/can-wrapper-small.png" %}
  </div>
  <div class="column">
    <span><h3>OpenSourcePHY: A High Speed Serial Link in Sky130</h3></span>
    <span><h5>Can Wang, Estelle He</h5></span>
    <span><h5><a href="https://github.com/CansWang/open-source-phy_SKY130">Code</a></h5></span>
    <span><p></p></span>
  </div>
</div> 
    
    
<div class="columns is-mobile is-centered is-vcentered">
  <div class="column is-one-third">
    {% include image-modal.html ratio="is-4by5" link="/assets/images/nikhil-wrapper-small.png" alt="RADAR motion compensation" large_link="/assets/images/nikhil-wrapper-small.png" %}
  </div>
  <div class="column">
    <span><h3>A Mixed-Signal Edge Accelerator for Real-Time mmWave Platform Vibration Compensation</h3></span>
    <span><h5>Nikhil Poole</h5></span>
    <span><h5><a href="https://code.stanford.edu/nhpoole/ee272b_mixed_signal_mmwave_accelerator.git">Code</a></h5></span>
    <span><p></p></span>
  </div>
</div> 


<div class="columns is-mobile is-centered is-vcentered">
  <div class="column is-one-third">
    {% include image-modal.html ratio="is-4by5" link="/assets/images/eldrick-wrapper-small.png" alt="Wakey wakey" large_link="/assets/images/eldrick-wrapper-small.png" %}
  </div>
  <div class="column">
    <span><h3>Wakey-Wakey: A Low-Power, Reconfigurable Wake Word Accelerator</h3></span>
    <span><h5>Matthew Pauly, Eldrick Millares</h5></span>
    <span><h5>Code: <a href="https://github.com/eldrickm/wakey_wakey">Design</a>, <a href="https://github.com/eldrickm/caravel_user_project">Caravel User Project</a></h5></span>
    <span><p>Wakey-Wakey is an acoustic featurization and DNN accelerator which detects a user-configured wake word in human speech. It interfaces directly with an external microphone and can be configured via a Wishbone bus. Wakey-Wakey's custom DNN architecture and MFCC featurization pipeline were co-optimized with its RTL design to minimize area, power, complexity, and latency.</p></span>
  </div>
</div> 
  

<div class="columns is-mobile is-centered is-vcentered">
  <div class="column is-one-third">
    {% include image-modal.html ratio="is-4by5" link="/assets/images/kylee-wrapper-small.png" alt="CryptoChip" large_link="/assets/images/kylee-wrapper-small.png" %}
  </div>
  <div class="column">
    <span><h3>CryptoChip: A RISC-V Processor with Crypto Accelerator</h3></span>
    <span><h5>Kylee Krzanich, Sam Xu</h5></span>
    <span><h5><a href="https://github.com/krsandwich/EE272B">Code</a></h5></span>
    <span><p></p></span>
  </div>
</div> 
     

<div class="columns is-mobile is-centered is-vcentered">
  <div class="column is-one-third">
    {% include image-modal.html ratio="is-4by5" link="/assets/images/george-wrapper-small.png" alt="CryptoChip" large_link="/assets/images/george-wrapper-small.png" %}
  </div>
  <div class="column">
    <span><h3>A RISC-V OoO Processor with Victim Caches</h3></span>
    <span><h5>George Klimiashvili, Ismael Garcia</h5></span>
    <span><h5><a href="https://code.stanford.edu/igarc774/ee-272b-ooo-processor-project">Code</a></h5></span>
    <span><p></p></span>
  </div>
</div> 


<div class="columns is-mobile is-centered is-vcentered">
  <div class="column is-one-third">
    {% include image-modal.html ratio="is-4by5" link="/assets/images/pohan-wrapper-small.png" alt="CryptoChip" large_link="/assets/images/pohan-wrapper-small.png" %}
  </div>
  <div class="column">
    <span><h3>Toy-CGRA: A Coarse-Grained Reconfigurable Array for Flexible Acceleration of Machine Learning and Image Processing</h3></span>
    <span><h5>Po-Han Chen, Charles Tsao</h5></span>
    <span><h5>Code: <a href="https://github.com/pohantw/ee272b_CGRA">Design</a>, <a href="https://github.com/pohantw/caravel_user_project">Caravel User Project</a></h5></span>
    <span><p>Toy-CGRA is a 4x8 coarse-grained reconfigurable array (CGRA) that enables hardware acceleration of machine learning and image processing applications written in <a href="https://halide-lang.org/">Halide</a>. Compared to an FPGA, it provides faster configuration time and lower power consumption. Compared to an ASIC, it has higher flexibility. Toy-CGRA runs at 66 MHz and occupies an area of 3.5 mm x 2.9 mm.</p></span>
  </div>
</div>  

    
<h2 id="projects">Course Schedule</h2>
    
    
<table>
  <thead>
    <tr>
      <th>Week</th>
      <th>Date</th>
      <th>Topic</th>
      <th>Presenter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Mon, Mar 29</td>
      <td>Lecture: Class overview, updates to digital and analog flows</td>
      <td>Priyanka</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Wed, Mar 31</td>
      <td>Lecture: Project overview presentations (10 minutes per group)</td>
      <td>All groups</td>
    </tr> 
    <tr>
      <td>2</td>
      <td>Mon, Apr 5</td>
      <td>Lecture: Analog validation</td>
      <td>Daniel</td>
    </tr>		
    <tr>
      <td>2</td>
      <td>Wed, Apr 7</td>
      <td>Lecture: OpenLane flow, generating hard macro from design (analog and digital)</td>
      <td>Priyanka</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Mon, Apr 12</td>
      <td>Lecture: Caravel integration tutorial</td>
      <td>Kartik</td>
    </tr>      
    <tr>
      <td>3</td>
      <td>Wed, Apr 14</td>
      <td>Lecture: Magic tutorial</td>
      <td>Daniel</td>
    </tr>	
    <tr>
      <td>4</td>
      <td>Mon, Apr 19</td>
      <td>Lecture: Caravel I/Os</td>
      <td>Priyanka</td>
    </tr>	
    <tr>
      <td>4</td>
      <td>Wed, Apr 21</td>
      <td>Lecture: Fixture tutorial</td>
      <td>Daniel</td>
    </tr>
    <tr>
      <td>5</td>
      <td>Mon, Apr 26</td>
      <td>Lecture: Mid-quarter design review, functional demo (40 + 40 minutes)</td>
      <td>Nikhil, Weston/Aparna</td>
    </tr>	
    <tr>
      <td>5</td>
      <td>Wed, Apr 28</td>
      <td>Lecture: Mid-quarter design review, functional demo (40 + 40 minutes)</td>
      <td>Estelle/Can, John</td>
    </tr>      
    <tr>
      <td>5</td>
      <td>Fri, Apr 30</td>
      <td>RTL/schematics + tests due</td>
      <td></td>
    </tr> 		
    <tr>
      <td>6</td>
      <td>Mon, May 3</td>
      <td>Lecture: Mid-quarter design review, functional demo (40 + 40 minutes)</td>
      <td>George/Ismael, Kylee/Sam</td>
    </tr> 		
    <tr>
      <td>6</td>
      <td>Wed, May 5</td>
      <td>Lecture: Mid-quarter design review, functional demo (40 + 40 minutes)</td>
      <td>Eldrick/Matthew, Charles/Po-Han</td>
    </tr> 	
    <tr>
      <td>7</td>
      <td>Mon, May 10</td>
      <td>Debugging help</td>
      <td>Priyanka</td>
    </tr>
    <tr>
      <td>7</td>
      <td>Wed, May 12</td>
      <td>Debugging help</td>
      <td></td>
    </tr>      
    <tr>
      <td>8</td>
      <td>Mon, May 17</td>
      <td>Debugging help</td>
      <td></td>
    </tr>
    <tr>
      <td>8</td>
      <td>Wed, May 19</td>
      <td>Debugging help</td>
      <td></td>
    </tr>      
    <tr>
      <td>8</td>
      <td>Fri, May 21</td>
      <td>Inital layout due</td>
      <td></td>
    </tr>  
    <tr>
      <td>9</td>
      <td>Mon, May 24</td>
      <td>Debugging help</td>
      <td></td>
    </tr>
    <tr>
      <td>9</td>
      <td>Wed, May 26</td>
      <td>Lecture: Final presentation in class (20 minutes per group)</td>
      <td>Eldrick/Matthew, Kylee/Sam, George/Ismael, Charles/Po-Han</td>
    </tr>  	
    <tr>
      <td>10</td>
      <td>Mon, May 31</td>
      <td>Memorial Day (holiday, no classes)</td>
      <td></td>
    </tr>
    <tr>
      <td>10</td>
      <td>Wed, Jun 2</td>
      <td>Lecture: Final presentation in class (20 minutes per group)</td>
      <td>Estelle/Can, Nikhil, John, Weston/Aparna</td>
    </tr>		
    <tr>
      <td>10</td>
      <td>Fri, Jun 4</td>
      <td>Tapeout --- Submit designs to shuttle</td>
      <td></td>
    </tr>
  </tbody>
</table> 
    
    
<h2 id="projects">Grading</h2>
    
    
<table>
  <thead>
    <tr>
      <th>Component</th>
      <th>Weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Project overview presentation</td>
      <td>5%</td>
    </tr>
    <tr>
      <td>RTL/schematic + tests</td>
      <td>20%</td>
    </tr>
    <tr>
      <td>Mid-quarter design review</td>
      <td>15%</td>
    </tr>
    <tr>
      <td>Layout + signoff</td>
      <td>20%</td>
    </tr>
    <tr>
      <td>Final presentation</td>
      <td>15%</td>
    </tr>
    <tr>
      <td>Final report (Only if taking the class for 4 units)</td>
      <td>15%</td>
    </tr>
    <tr>
      <td>Weekly syncups</td>
      <td>10%</td>
    </tr>
  </tbody>
</table> 

</div>
